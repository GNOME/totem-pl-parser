variables:
  DEPENDENCIES: redhat-rpm-config meson git gettext gtk-doc intltool meson glib2-devel libxml2-devel gobject-introspection-devel libgcrypt-devel libarchive-devel libquvi-devel
  TEST_DEPS: gvfs dbus-daemon

build-fedora:
  image: fedora:latest
  before_script:
    # Update
    - dnf -y update && dnf install -y $DEPENDENCIES
  script:
    - meson _build
    - dnf install -y TEST_DEPS
    - dbus-run-session ninja -C _build test
    - ninja -C _build install
