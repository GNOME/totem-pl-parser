2008-05-07  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-media.c: Remove unused gnome-vfs include
	* plparse/totem-pl-parser-podcast.c (totem_pl_parser_add_rss),
	(totem_pl_parser_add_itpc), (totem_pl_parser_add_atom),
	(totem_pl_parser_get_feed_url), (totem_pl_parser_add_itms),
	(totem_pl_parser_add_opml): Port Podcast parsing to GIO

2008-05-06  Bastien Nocera  <hadess@hadess.net>

	* plparse/xmllexer.c (lexer_get_token): Update from xine-lib 1.2
	branch, fixes trailing linefeeds in element names (Closes: #531676)
	* plparse/totem-pl-parser-podcast.c (totem_pl_parser_is_rss):
	Remove work-around for bug #522968

2008-05-04  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c (totem_pl_parser_mime_type_from_data):
	Also force application/octet-stream mime-types through our home-made
	detection, fixes problems parsing a DOS text file at
	http://www.la-bas.org/podcast.php3 (Closes: #531289)

2008-04-30  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c (totem_pl_parser_add_url_valist):
	Remove trailing spaces from titles, to avoid new lines creeping up in
	UIs such as Rhythmbox' podcast list (Closes: #527854)

2008-04-24  Bastien Nocera  <hadess@hadess.net>

	* plparse/bswap.h:
	* plparse/disc-test.c:
	* plparse/totem-disc.c:
	* plparse/totem-disc.h:
	* plparse/totem-pl-parser-features.h.in:
	* plparse/totem-pl-parser-lines.c:
	* plparse/totem-pl-parser-lines.h:
	* plparse/totem-pl-parser-media.c:
	* plparse/totem-pl-parser-media.h:
	* plparse/totem-pl-parser-mini.h:
	* plparse/totem-pl-parser-misc.c:
	* plparse/totem-pl-parser-misc.h:
	* plparse/totem-pl-parser-pla.c:
	* plparse/totem-pl-parser-pla.h:
	* plparse/totem-pl-parser-pls.c:
	* plparse/totem-pl-parser-pls.h:
	* plparse/totem-pl-parser-podcast.c:
	* plparse/totem-pl-parser-podcast.h:
	* plparse/totem-pl-parser-private.h:
	* plparse/totem-pl-parser-qt.c:
	* plparse/totem-pl-parser-qt.h:
	* plparse/totem-pl-parser-smil.c:
	* plparse/totem-pl-parser-smil.h:
	* plparse/totem-pl-parser-wm.c:
	* plparse/totem-pl-parser-wm.h:
	* plparse/totem-pl-parser-xspf.c:
	* plparse/totem-pl-parser-xspf.h:
	* plparse/totem-pl-parser.c:
	* plparse/totem-pl-parser.h: Update FSF address

2008-04-08  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c (totem_pl_parser_mime_type_from_data):
	When getting a text/plain mime-type to look at further, return
	NULL if we fail to get a real mime-type, otherwise the file
	will be added during fallback (Closes: #524475)

2008-04-07  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-media.c (totem_pl_parser_iso_get_title),
	(totem_pl_parser_add_iso), (totem_pl_parser_add_cue),
	(totem_pl_parser_dir_compare), (totem_pl_parser_load_directory),
	(totem_pl_parser_add_directory), (totem_pl_parser_add_block):
	Finish porting to GIO (Closes: #520912)

	* plparse/totem-pl-parser-private.h:
	* plparse/totem-pl-parser.c (totem_pl_parser_might_be_file),
	(totem_pl_parser_ignore), (totem_pl_parser_parse_internal):
	Remove use of GNOME_VFS_MIME_TYPE_UNKNOWN

2008-04-07  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-disc.c (cd_cache_local_file_to_archive),
	(cd_cache_mount_archive_callback), (cd_cache_new),
	(cd_cache_mount_callback), (cd_cache_open_mountpoint),
	(cd_cache_unmount_callback), (cd_cache_free),
	(cd_cache_disc_is_dvd), (totem_cd_detect_type_from_dir),
	(totem_cd_detect_type_with_url): Add support for detecting
	DVD ISOs, as well as remote DVDs trees, and remote DVD ISOs

2008-04-04  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add missing gio linkage for the mini
	pl-parser

2008-04-04  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-disc.c (totem_cd_detect_type_with_url):
	Give out gvfs compatible CDDA URLs instead of gnome-vfs
	style ones

2008-04-03  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-disc.c (cd_cache_new): Better
	error message

2008-04-03  Bastien Nocera  <hadess@hadess.net>

	* plparse/disc-test.c (main): Fix some memleaks

	* plparse/totem-disc.c (totem_resolve_symlink),
	(cd_cache_get_dev_from_volumes), (cd_cache_new),
	(cd_cache_has_medium), (cd_cache_mount_callback),
	(cd_cache_open_mountpoint), (cd_cache_free),
	(cd_cache_disc_is_cdda), (totem_cd_dir_get_parent):
	Port to GIO

2008-04-03  Bastien Nocera  <hadess@hadess.net>

	* plparse/disc-test.c (main): Port to GIO

2008-03-22  Marc-Andre Lureau  <marcandre.lureau@gmail.com>

	* plparse/totem-pl-parser.c (totem_pl_parser_parse_internal):
	Build fix, typo in DEBUG macro.  (Closes: #523280)

2008-03-17  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-podcast.c (totem_pl_parser_is_rss),
	(totem_pl_parser_add_rss): Handle feeds with "<rss\n" as the
	document name (work-around XML parser bug), as seen in
	http://spanishpod.com/lessons/feed/ (Closes: #522968)

	* plparse/totem-pl-parser.c (totem_pl_parser_parse_internal):
	More debug when ignoring unsafe playlist types

2008-03-17  Bastien Nocera  <hadess@hadess.net>

	* *: First pass at porting to GIO. Completely broken, please
	bear with me.

2008-03-17  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-features.h.in: Fix license
	(Closes: #522790)

============ Version 2.22.0

2008-03-10  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.22.0

2008-03-03  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-media.c (totem_pl_parser_iso_get_title),
	(totem_pl_parser_dir_compare): Patch from Sebastian Pölsterl
	<marduk@k-d-w.org> to sort filenames the same way nautilus does
	(Closes: #518116)

2008-02-29 Christian Schaller <christian.schaller@collabora.co.uk>

	* Add totem-pl-parser.spec.in
	* autogen.sh: fix name of package to be totem-pl-parser
	* configure.in: add totem-pl-parser.spec
	* Makefile.am: add totem-pl-parser.spec

============ Version 2.21.92

2008-02-24  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.92

2008-02-24  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-xspf.c (parse_xspf_track):
	* plparse/totem-pl-parser.c (totem_pl_parser_class_init):
	* plparse/totem-pl-parser.h: Add support for the some last.fm
	XSPF tags (lastfm:trackauth, duration in milliseconds, and
	download URLs as TOTEM_PL_PARSER_FIELD_ID,
	TOTEM_PL_PARSER_FIELD_DURATION_MS and
	TOTEM_PL_PARSER_FIELD_DOWNLOAD_URL respectively

2008-02-23  Bastien Nocera  <hadess@hadess.net>

	* plparse/test-parser.c (test_duration): Add test for the duration
	being passed as a "float" (minutes.seconds), as used in
	http://www.stephenfry.com/podcasts/rss.xml
	* plparse/totem-pl-parser.c (totem_pl_parser_parse_internal),
	(totem_pl_parser_parse_duration): Fix test above, fix crash
	when my_gnome_vfs_get_mime_type_with_data returns a NULL mime-type
	(Closes: #518242)

2008-02-23  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-xspf.c (totem_pl_parser_write_xspf),
	(parse_xspf_track):
	* plparse/totem-pl-parser.c (totem_pl_parser_class_init):
	* plparse/totem-pl-parser.h: Give out much more metadata when parsing
	XSPF playlists, as used on the new last.fm streaming system
	(Helps: #518231)

2008-02-21  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c (totem_pl_parser_mimetype_is_ignored),
	(totem_pl_parser_parse_internal): Fix text/plain files getting
	added even though they don't have a proper playlist mime-type,
	spotted by Tim-Philipp Müller

2008-02-13  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-lines.c:
	(totem_pl_parser_get_extinfo_title), (totem_pl_parser_add_m3u):
	Fix parsing of the VLC-specific playlist on the FreeBox, available
	at http://mafreebox.freebox.fr/freeboxtv/playlist.m3u if you have
	such a device

2008-02-07  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-qt.c:
	(totem_pl_parser_add_quicktime_rtsptext): Fix parsing of RTSPtext
	playlist from http://mediathek.zdf.de/ (QuickTime selected)

2008-02-07  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-wm.c: (totem_pl_parser_is_asx):
	Also look for "<Asx" as a magic in ASX files
	* plparse/totem-pl-parser.c: (my_gnome_vfs_get_mime_type_with_data),
	(my_gnome_vfs_get_mime_type_for_data),
	(totem_pl_parser_can_parse_from_data): When parsing from data,
	fall-back to looking for a mime-type ourselves if all else
	fails (Closes: #505398)

2008-01-27  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-lines.c: (totem_pl_parser_add_ra),
	(totem_pl_parser_is_uri_list):
	* plparse/totem-pl-parser-lines.h:
	* plparse/totem-pl-parser-podcast.c: (totem_pl_parser_is_rss),
	(totem_pl_parser_is_atom), (totem_pl_parser_is_opml),
	(totem_pl_parser_is_xml_feed), (parse_rss_items),
	(totem_pl_parser_add_rss), (parse_atom_entries),
	(parse_opml_outline):
	* plparse/totem-pl-parser-podcast.h:
	* plparse/totem-pl-parser-private.h:
	* plparse/totem-pl-parser-qt.c: (totem_pl_parser_is_quicktime),
	(totem_pl_parser_add_quicktime):
	* plparse/totem-pl-parser-qt.h:
	* plparse/totem-pl-parser-wm.c: (totem_pl_parser_is_asx),
	(totem_pl_parser_is_asf), (parse_asx_entry):
	* plparse/totem-pl-parser-wm.h:
	* plparse/totem-pl-parser.c: (totem_pl_parser_set_property),
	(totem_pl_parser_get_property),
	(my_gnome_vfs_get_mime_type_with_data), (totem_pl_parser_base_url),
	(totem_pl_parser_write_buffer), (totem_pl_parser_num_entries),
	(totem_pl_parser_relative), (totem_pl_parser_write_with_title),
	(totem_pl_parser_add_url_valist), (totem_pl_parser_parse_internal),
	(totem_pl_parser_can_parse_from_data):
	Return a mime-type from the _is_ functions, and use those functions
	in my_gnome_vfs_get_mime_type_with_data to check undecided files,
	such as RSS feeds with their magic too far in the file
	(Closes: #512289)

2008-01-26  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c:
	(my_gnome_vfs_get_mime_type_with_data):
	If we get text/plain as the mime-type at the end of the function,
	check whether it could be an RSS feed, fixes parsing CBC podcasts
	(Closes: #511627)

2008-01-25  Bastien Nocera  <hadess@hadess.net>

	* lib/memmem.c: Patch from Damien Carbery <damien.carbery@sun.com>
	to fix the build on Solaris (Closes: #512073)

============ Version 2.21.91

2008-01-21  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.91

2008-01-19  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser-podcast.c: (totem_pl_parser_is_rss),
	(totem_pl_parser_is_atom), (totem_pl_parser_is_opml):
	* plparse/totem-pl-parser-qt.c: (totem_pl_parser_is_quicktime):
	* plparse/totem-pl-parser-wm.c: (totem_pl_parser_is_asx):
	Fix memmem args order, fixes some playlist not being recognised
	as such

2008-01-17  Philip Withnall  <pwithnall@svn.gnome.org>

	* docs/reference/totem-pl-parser-docs.sgml:
	* docs/reference/totem-pl-parser-sections.txt:
	* plparse/totem-pl-parser.c:
	* plparse/totem-pl-parser.h: Clean up the documentation order,
	add some documentation for the TotemPlParser object, and add some
	example code. (Closes: #507995)

2008-01-15  Bastien Nocera  <hadess@hadess.net>

	* plparse/Makefile.am: Use 64-bit versions of the
	functions when possible, fixes DVD ISO not being recognised
	(Closes: #509020)

2008-01-15  Philip Withnall  <pwithnall@svn.gnome.org>

	* docs/reference/totem-pl-parser-overrides.txt: Add file missing
	from the last commit. Also, update svn:ignore properties.

2008-01-15  Philip Withnall  <pwithnall@svn.gnome.org>

	* Makefile.am:
	* configure.in:
	* docs/reference/Makefile.am:
	* docs/reference/totem-pl-parser-docs.sgml:
	* docs/reference/totem-pl-parser-sections.txt:
	* docs/reference/totem-pl-parser.types:
	* docs/reference/version.xml.in:
	* plparse/totem-disc.c:
	* plparse/totem-disc.h:
	* plparse/totem-pl-parser.c: (totem_pl_parser_class_init),
	(totem_pl_parser_num_entries):
	* plparse/totem-pl-parser.h: Add full documentation for all
	public symbols exposed by the library, excluding code samples
	for the playlist parser. (Helps: #507995)

2008-01-09  Philip Withnall  <pwithnall@svn.gnome.org>

	* plparse/totem-disc.c: (cd_cache_has_medium):
	* plparse/totem-pl-parser-private.h:
	* plparse/totem-pl-parser.c: (totem_pl_parser_get_type),
	(totem_pl_parser_class_init),
	(totem_pl_parser_base_class_finalize), (totem_pl_parser_init),
	(totem_pl_parser_add_url_valist): Make the property spec pool
	static, and only instantiate it once (on base class init),
	rather than every time a PlParser is initted. Also,
	fix a small memory leak in totem-disc.c. (Closes: #507909)

2008-01-09  Bastien Nocera  <hadess@hadess.net>

	* lib/memmem.c: The private function should be called
	totem_private_memmem, not memmem
	* plparse/Makefile.am: Link the mini library to the glibc
	replacement functions as well

2008-01-08  Bastien Nocera  <hadess@hadess.net>

	* docs/Makefile.am: Add missing file

2008-01-08  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c: Add docs for _new() and the signals

2008-01-08  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in:
	* docs/reference/MODULE.types:
	* docs/reference/Makefile.am: Add the beginnings of gtk-doc
	support

2008-01-08  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Fix HAL test, spotted by Saleem Abdulrasool
	<compnerd@compnerd.org> (Closes: #507980)

============ Version 2.21.90

2008-01-07  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.90
	* plparse/Makefile.am: Fix distcheck

2007-12-28  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c: (totem_pl_parser_is_iso8601_date):
	Fix work-around for GLib bug #503029, the test was broken

2007-12-28  Bastien Nocera  <hadess@hadess.net>

	* plparse/plparser.symbols: Add totem_pl_parser_relative to the
	list of symbols to export, for the benefit of the parser test
	program, this symbol isn't available in the headers
	* plparse/test-parser.c: (test_relative_real), (test_relative),
	(main): Re-add the relative path test, add 2 new tests
	* plparse/totem-pl-parser.c: (totem_pl_parser_relative):
	Fix problems with "overlapping" paths that aren't related
	(ie. when the base for the output file contains the path to
	 the media file) (Closes: #505906)

2007-12-19  Bastien Nocera  <hadess@hadess.net>

	* configure.in:
	* lib/Makefile.am:
	* lib/memmem.c:
	* lib/totem_internal.h: Add internal BSD version of memmem

	* plparse/totem-pl-parser-podcast.c: (totem_pl_parser_is_rss),
	(totem_pl_parser_is_atom), (totem_pl_parser_is_opml):
	* plparse/totem-pl-parser-wm.c: (totem_pl_parser_is_asx),
	(totem_pl_parser_is_asf):
	* plparse/totem-pl-parser-qt.c: (totem_pl_parser_is_quicktime):
	Use memmem instead of copying the buffers before checking them

	* plparse/*.c: Remove conditional config.h include

2007-12-17  Bastien Nocera  <hadess@hadess.net>

	* plparse/xmllexer.c: (lex_convert), (lexer_init),
	(lexer_get_token):
	* plparse/xmllexer.h:
	* plparse/xmlparser.c: (xml_parser_init),
	(xml_parser_get_node_internal):
	* plparse/xmlparser.h: Update from xine-lib-1.2, use the BOMs
	in XML files to convert the data from unicode to UTF-8

	* plparse/bswap.h: Added to allow compilation

	* plparse/totem-pl-parser.c: (totem_pl_parser_is_iso8601_date),
	(totem_pl_parser_can_parse_from_data): Add missing checks for
	valid dates

2007-12-11  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c: (totem_pl_parser_is_iso8601_date),
	(totem_pl_parser_parse_date): Add work-around for GLib
	bug #503029

2007-12-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Update requirements

	* plparse/test-parser.c: (entry_metadata_foreach),
	(test_data_get_data), (main): Special-case pub dates, and print
	the original value, the parsed value, and a human-readable parsed
	value

	* plparse/totem-pl-parser.c: (totem_pl_parser_parse_date):
	Add some more debug, and remove Rhythmbox people from the Copyright

	* plparse/xmlparser.c: (xml_parser_init),
	(xml_parser_get_node_internal): Ignore Byte Order Marks at the
	beginning of XML files (Closes: #503031)

2007-12-11  Bastien Nocera  <hadess@hadess.net>

	* configure.in: 
	* totem-plparser-uninstalled.pc.in:
	* totem-plparser.pc.in: Depend on camel to parse RFC 2822 date
	strings (as used in RSS feeds), use GLib to parse RFC 3339/ISO 8601
	dates (as used in Atom feeds)

	* plparse/test-parser.c: (test_date_real), (test_date), (main):
	Add tests for a few RSS and Atom date parsing
	* plparse/totem-pl-parser.c: (totem_pl_parser_parse_date): use
	Camel and GLib for date parsing

	(Closes: #379932)

2007-12-10  Bastien Nocera  <hadess@hadess.net>

	* plparse/totem-pl-parser.c: (totem_pl_parser_might_be_file),
	(totem_pl_parser_resolve_url), (totem_pl_parser_ignore),
	(totem_pl_parser_ignore_from_mimetype),
	(totem_pl_parser_parse_internal),
	(totem_pl_parser_can_parse_from_data):
	Work-around file-to-file relative links resolution, as appearing
	in broken redirects on the Apple Trailers page
	* plparse/test-parser.c: (test_resolve): add test

============ Version 2.21.6

2007-12-06  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.6

2007-12-04  Bastien Nocera  <hadess@hadess.net>

	* totem-plparser-mini-uninstalled.pc.in:
	* totem-plparser-mini.pc.in: Remove some
	unneeded dependencies from the pkgconfig
	files for the mini library

2007-12-04  Bastien Nocera  <hadess@hadess.net>

	* plparse/Makefile.am: add soname info to
	the mini lib
	* plparse/plparser-mini.symbols: only export
	the needed functions
	* totem-plparser-mini-uninstalled.pc.in:
	* totem-plparser-mini.pc.in: Fix library linkage,
	we want -mini, not the full library

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* configure.in: Add missing DBUS_REQS

============ Version 2.21.5

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* NEWS: upd
	* configure.in: 2.21.5

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* AUTHORS: added
	* README: added
	(Closes: #501314)

	* plparse/totem-disc.c: (cd_cache_new), (cd_cache_has_medium):
	Fix double-free due to overzealous free (Closes: #501120)

============ Version 2.21.4

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am:
	* configure.in: 2.21.4

	* totem-plparser-mini-uninstalled.pc.in:
	* totem-plparser-mini.pc.in:
	* totem-plparser-uninstalled.pc.in:
	* totem-plparser.pc.in: Update includes to new location

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* MAINTAINERS: add
	* plparse/stamp-totem-pl-parser-builtins.h: Remove this built item

2007-12-03  Bastien Nocera  <hadess@hadess.net>

	* *: Moved from Totem, export mini plparser
	for use in the browser plugin (Closes: #462153)

